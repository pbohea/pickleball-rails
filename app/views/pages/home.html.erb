<% content_for :title, "Pickleball" %>

<style>
  /* Keep content from being covered by the fixed bottom bar */
  .with-bottom-pad {
    padding-bottom: calc(88px + env(safe-area-inset-bottom));
  }

  /* Logo styling with subtle animation */
  .hero-logo {
    animation: fadeInDown 0.8s ease-out;
    filter: drop-shadow(0 4px 10px rgba(0,0,0,0.1));
  }

  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Modern button styles */
  .modern-btn-primary {
    background: linear-gradient(135deg, #0d6efd 0%, #0056b3 100%);
    border: none;
    border-radius: 16px;
    padding: 1.5rem 2rem;
    font-size: 1.1rem;
    font-weight: 600;
    color: white;
    box-shadow: 0 10px 30px rgba(13, 110, 253, 0.3);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .modern-btn-primary::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s ease;
  }

  .modern-btn-primary:hover::before {
    left: 100%;
  }

  .modern-btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 15px 40px rgba(13, 110, 253, 0.4);
    color: white;
  }

  .modern-btn-primary:active {
    transform: translateY(0);
  }

  .modern-btn-outline {
    background: white;
    border: 2px solid #0d6efd;
    border-radius: 16px;
    padding: 1.5rem 2rem;
    font-size: 1.1rem;
    font-weight: 600;
    color: #0d6efd;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
    transition: all 0.3s ease;
  }

  .modern-btn-outline:hover {
    transform: translateY(-2px);
    box-shadow: 0 15px 40px rgba(13, 110, 253, 0.2);
    border-color: #0056b3;
    color: #0056b3;
    background: white;
  }

  /* Slide-up animation for the bottom CTA */
  .auth-cta {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    padding-bottom: env(safe-area-inset-bottom);
    background: linear-gradient(to top, rgba(255,255,255,0.98), rgba(255,255,255,0.95));
    backdrop-filter: blur(10px);
    border-top: 1px solid rgba(13, 110, 253, 0.1);
    animation: slideUp .3s ease-out both;
    z-index: 1030;
    box-shadow: 0 -10px 30px rgba(0,0,0,0.05);
  }

  @keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to   { transform: translateY(0);    opacity: 1; }
  }

  .auth-btn {
    background: linear-gradient(135deg, #0d6efd 0%, #0056b3 100%);
    border: none;
    color: white;
    font-weight: 600;
    padding: 0.75rem 2rem;
    border-radius: 25px;
    box-shadow: 0 4px 15px rgba(13, 110, 253, 0.3);
    transition: all 0.3s ease;
  }

  .auth-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(13, 110, 253, 0.4);
    color: white;
  }

  .app-download-banner {
    background: linear-gradient(120deg, #0d6efd 0%, #0a58ca 70%);
    color: #fff;
    box-shadow: 0 6px 16px rgba(13, 110, 253, 0.2);
    border-radius: 0;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1100;
  }

  .app-download-btn {
    background: #fff;
    border: none;
    color: #0d6efd;
    border-radius: 8px;
    padding: 0.45rem 0.9rem;
    font-weight: 700;
    font-size: 0.9rem;
    line-height: 1.1;
  }

  .app-download-btn:hover {
    color: #084298;
  }

  .app-download-close {
    filter: invert(1);
    opacity: 0.85;
  }

  .app-download-close:hover {
    opacity: 1;
  }

  body.app-banner-active main {
    padding-top: 60px;
  }

  .bottom-links {
    position: sticky;
    bottom: 8px;
    background: #f8f9fa;
    z-index: 1000;
  }

</style>

<div class="min-vh-100 bg-light d-flex flex-column justify-content-between flex-grow-1">
  <% unless hotwire_native_app? %>
    <div class="app-download-banner w-100" data-controller="app-download-banner" data-app-download-banner-target="banner">
      <div class="container d-flex align-items-center justify-content-between gap-2 py-3">
        <div class="d-flex align-items-center gap-2">
          <img src="<%= asset_path('appstore_logo.png') %>" alt="Pickleball app icon" width="60" height="60" style="border-radius: 14px;">
          <div class="fw-semibold" style="font-size: 0.85rem;">Use the App for all features</div>
        </div>
        <div class="d-flex align-items-center gap-2">
          <a href="https://apps.apple.com/app/id6753730148"
             class="btn app-download-btn text-decoration-none"
             target="_blank"
             rel="noopener noreferrer">
            Open
          </a>
          <button type="button"
                  class="btn-close app-download-close"
                  aria-label="Dismiss App Store banner"
                  data-action="click->app-download-banner#dismiss">
          </button>
        </div>
      </div>
    </div>
  <% end %>

  <!-- Main content container -->
  <div class="container pt-4" style="max-width: 600px; position: relative; z-index: 1;">

    <!-- Hero -->
    <div class="text-center mb-4">
      <img src="/logoplain.png" alt="Logo" class="hero-logo mb-0" width="80" height="104">
    </div>

    <div class="d-grid gap-3 mb-4">
      <!-- Find Events Near Me -->
      <%= form_with url: events_path, method: :get, local: true,
                    data: { controller: "location-search",
                            action: "submit->location-search#validateLocation" } do |f| %>

        <%= f.hidden_field :radius, value: 5 %>
        <%= f.hidden_field :date_range, value: "" %>
        <%= f.hidden_field :lat, data: { "location-search-target": "latInput" } %>
        <%= f.hidden_field :lng, data: { "location-search-target": "lngInput" } %>
        <%= f.text_field :address, class: "d-none", data: { "location-search-target": "addressInput" } %>

        <div id="location-error" class="d-none"></div>

        <div class="d-grid">
          <button type="button"
                  class="modern-btn-primary"
                  data-action="click->location-search#useCurrentLocation"
                  data-location-search-target="locationButton"
                  aria-busy="false">
            <span class="fs-5" data-location-search-target="label">
              Find Live Music Near Me
            </span>
            <img src="/logoplain.png"
                 alt="Loading location"
                 width="36" height="46"
                 class="logo-icon d-none"
                 data-location-search-target="logo">
          </button>
        </div>
      <% end %>

      <!-- Search Button -->
      <div class="d-grid">
        <%= link_to search_path, class: "modern-btn-outline text-decoration-none d-flex justify-content-center align-items-center" do %>
          <i class="fas fa-search me-2 fs-5"></i>
          <span class="fs-5">Discover more</span>
        <% end %>
      </div>
    </div>

    <%# <%= render 'new_artists', artists: @new_artists %>
  </div>

  <!-- Bottom section with audience nav and optional auth buttons -->
  <div class="mt-auto bottom-links">
    <!-- Audience Navigation Section -->
    <div class="text-center py-3">
      <%= link_to "Artists", artists_about_path, class: "text-primary text-decoration-none fw-semibold", data: { turbo: false } %>
      <span class="text-muted mx-2">|</span>
      <%= link_to "Venue Owners", owners_about_path, class: "text-primary text-decoration-none fw-semibold", data: { turbo: false } %>
      <span class="text-muted mx-2">|</span>
      <%= link_to "Music Fans", about_path, class: "text-primary text-decoration-none fw-semibold", data: { turbo: false } %>
    </div>

    <!-- Sign In/Sign Up (only if no one signed in) -->
    <%# <% unless owner_signed_in? || artist_signed_in? || user_signed_in? || promoter_signed_in? %>
    <%#   <div class="auth-cta">
    <%#     <div class="container py-3" style="max-width: 600px;">
    <%#       <div class="d-flex justify-content-center gap-3">
    <%#         <%= link_to "Sign In", new_user_session_path,
    <%#               class: "auth-btn text-decoration-none",
    <%#               data: { turbo: false } %>

    <%#         <%= link_to "Sign Up", new_user_registration_path,
    <%#               class: "auth-btn text-decoration-none",
    <%#               data: { turbo: false } %>
    <%#       </div>
    <%#     </div>
    <%#   </div>
    <%# <% end %>
  </div>
</div>
