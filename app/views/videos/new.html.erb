<% content_for :title, "Upload Video" %>

<div class="container py-5">
  <div class="page-shell">
    <div>
      <div class="page-header__eyebrow">Upload</div>
      <h1 class="page-title">Upload a video</h1>
      <p class="page-subtitle">Record or select a clip, add quick context, and we will analyze it.</p>
    </div>

    <div class="page-card"
      data-controller="bridge--video-upload"
      data-bridge--video-upload-upload-url-value="<%= native_upload_videos_url %>"
      data-bridge--video-upload-csrf-token-value="<%= form_authenticity_token %>">
      <%= form_with model: @video, url: videos_path, method: :post do |f| %>
        <div class="mb-3">
          <%= f.label :title, "Title (optional)", class: "form-label" %>
          <%= f.text_field :title, class: "form-control", placeholder: "Serve practice - May 3" %>
        </div>

        <div class="mb-4">
          <%= f.label :notes, "Notes for your coach", class: "form-label" %>
          <%= f.text_area :notes, rows: 4, class: "form-control", data: { "bridge--video-upload-target": "notes" }, placeholder: "What should the model focus on?" %>
        </div>

        <div class="mb-4">
          <button type="button" class="btn btn-primary" data-action="click->bridge--video-upload#capture">
            Record or choose video
          </button>
          <% unless hotwire_native_app? %>
            <p class="text-muted mt-2">On desktop, you can also upload a file directly.</p>
          <% end %>
        </div>

        <% unless hotwire_native_app? %>
          <div class="mb-4">
            <%= f.label :original_video, "Video file", class: "form-label" %>
            <%= f.file_field :original_video, class: "form-control", accept: "video/*" %>
          </div>
        <% end %>

        <div class="d-flex flex-wrap gap-2">
          <%= f.submit "Upload", class: "btn btn-primary" %>
          <%= link_to "Back", root_path, class: "btn btn-outline-secondary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
