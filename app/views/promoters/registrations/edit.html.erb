<% content_for :title, "Edit Promoter Account" %>

<div class="container my-4 pt-3" style="max-width: 500px;">
  <div class="card shadow-sm">
    <div class="card-body">

      <%= form_with model: resource, as: resource_name, url: registration_path(resource_name), 
                    method: :put, local: true, data: { turbo: false } do |f| %>
        <%= render "devise/shared/error_messages", resource: resource %>

        <div class="mb-3">
          <%= f.label :email, "Confirm or update your email address", class: "form-label fw-medium" %>
          <span style="color: red;">*</span>
          <%= f.email_field :email, class: "form-control form-control-lg", required: true, autofocus: true %>
        </div>
        <!---->
        <%# if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
        <!--          <p class="text-muted small mb-3">
            Waiting confirmation for: <strong><%#= resource.unconfirmed_email %></strong>
          </p>
        <%# end %>-->

        <div class="mb-3">
          <%= f.label :current_password, class: "form-label fw-medium" %>
          <span style="color: red;">*</span>
          <%= f.password_field :current_password, class: "form-control form-control-lg", 
                              autocomplete: "current-password", 
                              required: true,
                              minlength: 8,
                              maxlength: 20 %>
        </div>

        <div class="mb-3">
          <%= f.label :password, "New Password", class: "form-label fw-medium" %>
          <%= f.password_field :password, class: "form-control form-control-lg", 
                              autocomplete: "new-password",
                              minlength: 8,
                              maxlength: 20,
                              pattern: "^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,20}$",
                              title: "Must be 8-20 characters, with at least one uppercase letter, one lowercase letter, and one number" %>
          <div class="form-text">
            Must be 8â€“20 characters, with at least one uppercase letter, one lowercase letter, and one number.
          </div>
        </div>

        <div class="mb-3">
          <%= f.label :password_confirmation, "Confirm New Password", class: "form-label fw-medium" %>
          <%= f.password_field :password_confirmation, class: "form-control form-control-lg", 
                              autocomplete: "new-password",
                              minlength: 8,
                              maxlength: 20 %>
        </div>

        <div class="d-grid gap-2">
          <%= f.submit "Update Account", class: "btn btn-primary btn-lg shadow-sm" %>
        </div>
      <% end %>

      <hr class="my-4">

      <div class="text-center">
        <h6>Cancel Account</h6>
        <p class="text-muted small">Unhappy? You can delete your account below.</p>
        <%= button_to "Cancel my account", registration_path(resource_name),
                      method: :delete,
                      data: { confirm: "Are you sure?" },
                      class: "btn btn-outline-danger btn-sm" %>
      </div>

    </div>
  </div>
</div>
