<turbo-frame id="follow_button_<%= artist.id %>">
  <div class="d-flex justify-content-center">
    <div class="text-center">
      <% if user_signed_in? || owner_signed_in? || artist_signed_in? %>
        <% current_follower = current_user || current_owner || current_artist %>
        <% follow = ArtistFollow.find_by(follower: current_follower, artist: artist) %>

        <% if follow %>
          <%= button_to "Unfollow", artist_follow_path(follow),
                        method: :delete,
                        class: "btn btn-outline-danger btn-sm",
                        data: { turbo_confirm: "Unfollow this artist?" } %>
        <% else %>
          <%= button_to "Follow", artist_follows_path(artist_id: artist.id),
                        method: :post,
                        class: "btn btn-success btn-sm" %>
        <% end %>

      <% elsif promoter_signed_in? %>
        <% current_follower = current_promoter %>
        <% follow = ArtistFollow.find_by(follower: current_follower, artist: artist) %>

        <% if follow %>
          <%= button_to "Remove from my artists", artist_follow_path(follow),
                        method: :delete,
                        class: "btn btn-outline-danger btn-sm",
                        data: { turbo_confirm: "Remove this artist from your list?" } %>
        <% else %>
          <%= button_to "Add to my artists", artist_follows_path(artist_id: artist.id),
                        method: :post,
                        class: "btn btn-success btn-sm" %>
        <% end %>

      <% else %>
        <!-- stimulus controller for alert -->
        <div data-controller="auth-prompt" 
             data-auth-prompt-message-value="You need to sign in to follow artists. Go to sign in page?">
          <button type="button"
                  class="btn btn-success btn-sm"
                  data-action="click->auth-prompt#prompt">
            Follow
          </button>
        </div>
      <% end %>
    </div>
  </div>
</turbo-frame>
