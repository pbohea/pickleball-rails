<% rows.each do |row| %>
  <div class="card" style="border:1px solid #e5e5e5;padding:12px;margin-bottom:8px;border-radius:6px;">
    <h3><%= row.artist_name %></h3>

    <p><strong>Date:</strong> <%= row.date %></p>
    <p><strong>Start Time:</strong> <%= row.start_time_str.presence || "–" %></p>
    <p><strong>End Time:</strong> <%= row.end_time_str.presence || "–" %></p>
    <p><strong>Venue:</strong> <%= row.venue&.name || "–" %></p>

    <% if row.source_url.present? %>
      <%= link_to "View source", row.source_url, target: "_blank", rel: "noopener" %>
    <% end %>

    <% if conflicts[row.id] %>
      <div style="color:#c00;font-weight:bold;">⚠ Conflict detected – existing event overlaps</div>
    <% end %>

    <div style="margin-top:8px;">
      <%= button_to "Approve",
            approve_admin_event_import_event_import_row_path(row.event_import_batch, row),
            method: :post,
            data: { turbo_confirm: "Create event for #{row.artist_name}?" },
            class: "btn btn-sm btn-primary" %>

      <%= button_to "Delete",
            admin_event_import_event_import_row_path(row.event_import_batch, row),
            method: :delete,
            data: { turbo_confirm: "Delete this proposed event?" },
            class: "btn btn-sm btn-outline-danger" %>
    </div>
  </div>
<% end %>
